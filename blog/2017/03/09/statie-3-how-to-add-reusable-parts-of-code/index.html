<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Statie - part 3: How to Add Reusable Parts of Code | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    
    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css" integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/brands.css" integrity="sha384-nT8r1Kzllf71iZl81CdFzObMsaLOhqBU1JD2+XoAALbdtWaXDOlWOZTR4v1ktjPE" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css" integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">

        <link href="/assets/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />

        <link href="/assets/css/style.css" rel="stylesheet" type="text/css" />

    <link href="/assets/gifplayer/gifplayer.css" rel="stylesheet" type="text/css" />

        <link href="/assets/css/checklist.css" rel="stylesheet" type="text/css" />
</head>
    <body>
                <!-- post_id: 33 -->

        
<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    <img src="https://avatars1.githubusercontent.com/u/924196?s=60&v=4" class="me_avatar">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li class="">
                    <a href="/php-framework-trends">Trends</a>
                </li>
                <li class="">
                    <a href="/clusters">Clusters</a>
                </li>
                <li class="">
                    <a href="/mission">Mission</a>
                </li>
                <li class="">
                    <a href="/talks">Talks</a>
                </li>
                <li class="">
                    <a href="/contact">Contact</a>
                </li>
                <li id="top-menu-search">
                    <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fas fa-book"></em>
                <br>
                Blog
            </a>


            <a href="/clusters" class="col-3 col-sm-3 ">
                <em class="fas fa-share-alt"></em>
                <br>
                Clusters
            </a>

            <a href="/php-framework-trends" class="col-3 col-sm-3 ">
                <em class="fas fa-chart-bar"></em>
                <br>
                Trends
            </a>

            <a href="/contact" class="col-3 col-sm-3 ">
                <em class="fas fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>

    <div class="hidden-md-up text-center" id="top-menu-search-mobile">
        <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
    </div>
</div>

        <div class="mainContent">
            <div class="container-fluid" id="post">
                <div class="text-center">
    <a href="https://github.com/sponsors/TomasVotruba" class="btn btn-outline-light d-block mt-3 btn-outline-dark" id="support-me-button">
        Do you find <strong>these posts helpful</strong>?
        <div class="hidden-md-up"><br></div>
        &nbsp;❤️ &nbsp;Support me on GitHub Sponsors&nbsp; <em class="fab fa-github fa-fw"></em>
    </a>
</div>

                <h1>Statie - part 3: How to Add Reusable Parts of Code</h1>

                <ul class="list-inline post-metadata">
    <li class="list-inline-item mr-3">
        <em class="fas fa-clock fa-fw"></em>
        <strong>3 min</strong>
    </li>

    <li class="list-inline-item mr-3">
        <em class="fas fa-calendar fa-fw"></em>
        <time datetime="2017-03-Thu">
            <strike>
                            Thu, Mar 9, 2017
            
            </strike>        </time>
    </li>

            <li class="list-inline-item mr-3 text-success">
            <em class="fas fa-fw fa-sync"></em> Updated Sep, 2018
        </li>
    
            <li class="list-inline-item mr-3">
            <em class="fas fa-fw fa-comments"></em>
            <a href="/blog/2017/03/09/statie-3-how-to-add-reusable-parts-of-code/#disqus_thread">X</a> comments
        </li>
    
    
            <li class="list-inline-item mr-3 text-primary">
            <em class="fab fa-fw fa-github"></em>
            <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2017/2017-03-09-statie-3-how-to-add-reusable-parts-of-code.md">Edit Post</a>
        </li>
    </ul>

                                    <div class="card border-danger card-bigger">
                        <div class="card-header text-white bg-danger">
                            <strong>This post is deprecated at March 2020</strong>
                        </div>
                        <div class="card-body">
                            <p>Statie was deprecated with last version 7, because 99 % of features are covered in Symfony application.<br>
<br>
To create static content, migrate to Symfony app and <a href="https://github.com/symplify/symfony-static-dumper">SymfonyStaticDumper</a>.</p>
                        </div>
                    </div>

                    <br>
                
                                    <div class="card border-success card-bigger">
                        <div class="card-header text-white bg-success">
                            <strong>This post was updated at September 2018</strong>
                        </div>
                        <div class="card-body">
                            <p>Updated with <strong>Statie 5</strong>, NEON → YAML and Twig.</p>
                        </div>
                    </div>

                    <br>
                
                <div class="card card-bigger">
                    <div class="card-body">
                        <p>You already know <a href="/blog/2017/02/20/statie-how-to-run-it-locally">how to run Statie with layout</a> and <a href="/blog/2017/03/06/statie-2-how-to-add-contact-page-with-data">how to add data structures</a>.
<br><br>
Today you'll learn how to <strong>decouple big templates to smaller and reusable snippets</strong>. Like Google Analytics code.</p>
                    </div>
                </div>

                <p>Sometimes you need to add part of template, that you want to use on multiple pages (in the same form or with smaller changes) or that makes your template less readable.</p>
<h2>Google Analytics</h2>
<p>Often you start a new web with settings up Google Analytics measure code.</p>
<p>It looks like this:</p>
<pre><code class="language-javascript">&lt;script&gt;
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'YXZ', 'auto');
    ga('send','pageview');
&lt;/script&gt;
&lt;script async defer src="https://www.google-analytics.com/analytics.js"&gt;&lt;/script&gt;</code></pre>
<p>We put into layout:</p>
<pre><code class="language-twig">&lt;!-- source/_layouts/default.twig --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {% block content %}{% endblock %}

        &lt;script&gt;
            ga=function(){ ga.q.push(arguments) };
            ga.q=[];
            ga.l=+new Date;
            ga('create', 'XYZ', 'auto');
            ga('send','pageview');
        &lt;/script&gt;
        &lt;script async defer src="https://www.google-analytics.com/analytics.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>This layout might be small, but it will be definitely bigger in real app and <strong>will keep growing and growing in time</strong>.</p>
<p>Google Analytics code is not something we change or extend too much. Why not outsource it?</p>
<h2>Sexy &amp; Small Snippet</h2>
<p>What if you could use some &quot;include googleAnalytics snippet&quot; command?</p>
<p>With Statie you can!</p>
<pre><code class="language-twig">{% include "_snippets/googleAnalytics.twig" %}</code></pre>
<h3>How does it Work?</h3>
<p>Statie scans <code>/_snippets</code> directory and turns all files to snippets. Relative path of the file in <code>/source</code> directory = key for including the snippets.</p>
<ul>
<li>&quot;_snippets/googleAnalytics.twig&quot; =&gt; <code>snippets/googleAnalytics.twig</code></li>
</ul>
<h3>Decoupling the Snippet</h3>
<p>First, we create the snippet file and move the Google Analytics code there:</p>
<pre><code class="language-html">&lt;!-- source/_snippets/googleAnalytics.twig --&gt;

&lt;script&gt;
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'XYZ', 'auto');
    ga('send','pageview');
&lt;/script&gt;
&lt;script async defer src="https://www.google-analytics.com/analytics.js"&gt;&lt;/script&gt;</code></pre>
<p>Then clean the layout:</p>
<pre><code class="language-twig">&lt;!-- source/_layouts/default.twig --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {% block content %}{% endblock %}
        {% include "_snippets/googleAnalytics.twig" %}
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>There is one last think that bothers me:</p>
<pre><code class="language-javascript">ga('create', 'XYZ', 'auto');</code></pre>
<p>Can you see it?</p>
<h2>ProTip #1: Why Always Put IDs to Config and Not to Code</h2>
<p>When you start using static site generator, you'll <strong>appreciate its power in scaling</strong>:</p>
<ul>
<li>First web might take some time to setup.</li>
<li>Second is mostly copy-pasting previous settings and changing only layout and content.</li>
<li>And third? Way too easy and well paid job.</li>
</ul>
<p>To allow this flow, I recommend <strong>keeping all IDs</strong> that change from site to site - Google Analytics, Facebook Pixel, Disqus ID... - in <code>_config/config.yml</code> file. When you create a new website, <strong>all you have to do is change one file</strong> to make it customized.</p>
<h3>How To Do It</h3>
<p>I wrote about config in previous post - <a href="/blog/2017/03/06/statie-2-how-to-add-contact-page-with-data#2-global-or-bigger-amount-of-data">go read it, if you missed it</a>.</p>
<p>So you should end up with this:</p>
<pre><code class="language-javascript">ga('create', '{{ $googleAnalytics }}', 'auto');</code></pre>
<p>Nice work!</p>
<h2>ProTip #2: Too Many Snippets? Group them by Type</h2>
<p>Often, I've ended up with many unrelated snippets in one directory.</p>
<pre><code class="language-bash">/source
    /_snippets
        comments.twig
        header.twig
        footer.twig
        postMetadata.twig
        postHeadline.twig
        postRecommendations.twig</code></pre>
<p>There is no need for that. You can group them to subdirs as you like:</p>
<pre><code class="language-bash">/source
    /_snippets
        /layout
            header.twig
            footer.twig
        /post
            comments.twig
            postMetadata.twig
            postHeadline.twig
            postRecommendations.twig</code></pre>
<h2>Now You Know</h2>
<ul>
<li>That using snippets will save lot of time.</li>
<li><strong>That snippets are named by their filename</strong>: <code>{% include "_snippest/fileName.twig" %}</code>.</li>
<li><strong>That snippets work the best with <a href="/blog/2017/03/06/statie-2-how-to-add-contact-page-with-data#2-global-or-bigger-amount-of-data">global configuration</a></strong>.</li>
</ul>
<p>Happy coding!</p>

                <br>

                <div class="row mb-5 mt-5">
                    <div class="col-12 mb-5">
                                                                            <a href="/blog/2017/11/20/how-to-write-interesting-job-offers-for-programmers" class="d-block pt-4 pb-4 pl-4 pr-4 btn btn-success btn-wrappable">
                                <em class="fas fa-fw fa-forward"></em>
                                <strong>Read Next</strong>
                                <br>
                                <span class="text-bigger">
                                    How to Write Interesting Jobs Offers for Programmers
                                </span>
                            </a>
                                            </div>

                    <div class="col-12">
                        <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2017/2017-03-09-statie-3-how-to-add-reusable-parts-of-code.md" class="d-block btn btn-dark btn-wrappable">
                            <em class="fab fa-fw fa-github"></em>
                            <strong>Found a typo?</strong> Fix it and join team of 90&nbsp;contributors
                        </a>
                    </div>
                </div>

                <br>

                <a name="comments"></a>
                <div id="disqus_thread"></div>

<script type="text/javascript">
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//' + 'itsworthsharing' + '.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
            </div>

            <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>
        </div>

        <script src="/assets/js/jquery-3.3.1.slim.min.js?=1596186276"></script>
<script src="/assets/gifplayer/jquery.gifplayer.js?=1546043189"></script>
<script src="/assets/js/cluster-checklist.js?=1459518311"></script>
<script src="/assets/js/cluster-expanable.js?=1552973852"></script>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

<script src="/assets/prism/prism.js"></script>

<script>
    $('.gifplayer').gifplayer();

    // sortable table
    $('.sortable_table').DataTable({
        // see https://datatables.net/examples/basic_init/filter_only.html
        "searching": false,
        "paging": false,
        "info": false,
        "order": [[1, "desc"]],
        // see https://datatables.net/examples/advanced_init/sort_direction_control.html
        "aoColumns": [
            null,
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] }
        ]
    });
</script>

<div class="text-center mt-5" id="footer">
    <div class="row">
        <div class="col-12">
            Join 22 912 PHP developers every month: <a href="/rss.xml">RSS</a>&nbsp;or&nbsp;<a href="https://twitter.com/votrubaT">@votrubaT</a>
        </div>
    </div>

    <p>
        Build by <a href="/thank-you">90 people</a>

        <span class="pl-2 pr-2">•</span>

        <a href="https://github.com/sponsors/TomasVotruba">Support me</a>

        <span class="hidden-sm-down">
            <span class="pl-2 pr-2">•</span>
            Hosted with <a href="https://www.statie.org/">Statie</a> on <a href="https://github.com/tomasvotruba/tomasvotruba.com">GitHub</a>
        </span>
    </p>
</div>
    </body>
</html>

        <meta property="og:type" content="article" />
    <meta property="og:title" content="Statie - part 3: How to Add Reusable Parts of Code" />
    <meta property="og:description" content="You already know [how to run Statie with layout](/blog/2017/02/20/statie-how-to-run-it-locally) and [how to add data structures](/blog/2017/03/06/statie-2-how-to-add-contact-page-with-data).

Today you&#039;ll learn how to **decouple big templates to smaller and reusable snippets**. Like Google Analytics code.
" />
    <meta property="og:url" content="/blog/2017/03/09/statie-3-how-to-add-reusable-parts-of-code" />

        <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="Statie - part 3: How to Add Reusable Parts of Code" />
    <meta name="twitter:description" content="You already know [how to run Statie with layout](/blog/2017/02/20/statie-how-to-run-it-locally) and [how to add data structures](/blog/2017/03/06/statie-2-how-to-add-contact-page-with-data).

Today you&#039;ll learn how to **decouple big templates to smaller and reusable snippets**. Like Google Analytics code.
" />
